import{r as t,s,o as e,c as a,a as n,w as l,b as i,t as o,F as u,d as c,I as r,i as d,e as h,f,g as p}from"./index.bb34e493.js";var m=((t,s)=>{const e=t.__vccOpts||t;for(const[a,n]of s)e[a]=n;return e})({data(){return{content:"",list:this.getMessage(),status:"正在加载留言"}},onLoad(){this.timer=setInterval((()=>this.getMessage()),3e3)},onUnload(){clearInterval(this.timer)},methods:{getMessage(){t.callFunction({name:"fun",data:{api:"getMessage"}}).then((t=>{this.list=t.result.data,this.status=0==this.list?"留言板是空的":"所有留言内容"}))},publish(){this.content.trim()?t.callFunction({name:"fun",data:{api:"publish",content:this.content}}).then((t=>{console.log(t),this.status="留言成功",s({title:"留言成功",icon:"success"}),this.content=""})):s({title:"留言无效",icon:"error"})}}},[["render",function(t,s,m,_,g,b){const v=r,x=d,y=h,I=f;return e(),a(u,null,[n(y,{class:"content"},{default:l((()=>[n(v,{type:"text",class:"input",modelValue:g.content,"onUpdate:modelValue":s[0]||(s[0]=t=>g.content=t),placeholder:"在这里写上你的留言"},null,8,["modelValue"]),n(x,{type:"primary",onClick:s[1]||(s[1]=t=>b.publish()),size:"mini"},{default:l((()=>[i("发布")])),_:1})])),_:1}),n(y,{class:"status"},{default:l((()=>[n(I,null,{default:l((()=>[i(o(g.status),1)])),_:1})])),_:1}),(e(!0),a(u,null,c(g.list,(t=>(e(),p(y,{key:t._id},{default:l((()=>[n(y,{class:"box"},{default:l((()=>[n(y,null,{default:l((()=>[i(o(t.content),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))],64)}],["__scopeId","data-v-69471619"]]);export{m as default};
