import{n as e,h as t,p as s,j as a,o as n,c as o,w as r,a as i,b as l,t as u,k as c,f as g,g as d,e as p,l as f,m}from"./index.3a624072.js";import{_ as h,a as x}from"./uni-list.3ec915eb.js";import{_ as b}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.0b4cb61d.js";var k=b({data:()=>({id:null,userName:"",onLogin:null}),onLoad(){this.getUserInfo()},onShow(){this.getUserInfo()},methods:{loginInfo(){!0===this.onLogin?e({url:"/pages/ucenter/account/account"}):e({url:"/pages/ucenter/login/login"})},getUserInfo(){let e=t("token");e?s.callFunction({name:"fun",data:{api:"getUserInfo",token:e}}).then((e=>{if(!e.result.success)throw Error(e.result.errorMessage);this.onLogin=!0;let t=e.result.data;this.id=t.id,this.userName=t.userName})).catch((e=>{a("log","at pages/ucenter/ucenter.vue:73",e),this.onLogin=!1})):this.onLogin=!1}}},[["render",function(e,t,s,a,b,k){const _=d,y=p,L=f(m("uni-list-item"),x),j=f(m("uni-list"),h);return n(),o(y,null,{default:r((()=>[i(y,{class:"flex",style:{margin:"60rpx 30rpx"},onClick:t[0]||(t[0]=e=>k.loginInfo())},{default:r((()=>[i(_,{src:"/assets/bg.87bbd97c.jpg",style:{"border-radius":"50%",width:"150rpx",height:"150rpx"}}),i(y,{class:"flex-col",style:{"margin-left":"20rpx","margin-top":"30rpx"}},{default:r((()=>[null===b.onLogin?(n(),o(y,{key:0},{default:r((()=>[l("正在获取登录信息")])),_:1})):!0===b.onLogin?(n(),o(y,{key:1},{default:r((()=>[i(y,{style:{"margin-bottom":"12rpx"}},{default:r((()=>[l(u(b.userName),1)])),_:1}),b.id?(n(),o(y,{key:0},{default:r((()=>[l(" id: "+u(b.id),1)])),_:1})):c("",!0)])),_:1})):(n(),o(y,{key:2},{default:r((()=>[g("p",{style:{"margin-bottom":"15rpx"}},"未登录"),g("p",{style:{"font-size":"small",color:"darkcyan"}},"赶紧登录吧!")])),_:1}))])),_:1})])),_:1}),i(j,null,{default:r((()=>[i(L,{title:"铸星",link:"",to:"/pages/ucenter/creation/creation"}),i(L,{title:"留言板",link:"",to:"/pages/ucenter/messageBoard/messageBoard"}),i(L,{title:"关于星梦",link:"",to:"/pages/ucenter/about/about"})])),_:1})])),_:1})}]]);export{k as default};
